<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Multivariate analysis and dimension reduction | Data exploration and statistics with R and the tidyverse</title>
  <meta name="description" content="Welcome to the wonderful world of data science and R !" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Multivariate analysis and dimension reduction | Data exploration and statistics with R and the tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Welcome to the wonderful world of data science and R !" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Multivariate analysis and dimension reduction | Data exploration and statistics with R and the tidyverse" />
  
  <meta name="twitter:description" content="Welcome to the wonderful world of data science and R !" />
  

<meta name="author" content="Vivien Roussez (A1 Telekom Austria Group)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="stats.html"/>
<link rel="next" href="reg.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data exploration and statistics with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Foreword</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#topics-of-the-week"><i class="fa fa-check"></i><b>2.1</b> Topics of the week</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#the-data-science-workflow"><i class="fa fa-check"></i><b>2.2</b> The data science workflow</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#resources"><i class="fa fa-check"></i><b>2.3</b> Resources</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#data-of-the-week"><i class="fa fa-check"></i><b>2.4</b> Data of the week</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-r.html"><a href="intro-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to R</a><ul>
<li class="chapter" data-level="3.1" data-path="intro-r.html"><a href="intro-r.html#what-is-r"><i class="fa fa-check"></i><b>3.1</b> What is R</a><ul>
<li class="chapter" data-level="3.1.1" data-path="intro-r.html"><a href="intro-r.html#description"><i class="fa fa-check"></i><b>3.1.1</b> Description</a></li>
<li class="chapter" data-level="3.1.2" data-path="intro-r.html"><a href="intro-r.html#objective-comparison-with-pyhton"><i class="fa fa-check"></i><b>3.1.2</b> (Objective) comparison with Pyhton</a></li>
<li class="chapter" data-level="3.1.3" data-path="intro-r.html"><a href="intro-r.html#what-can-i-do-with-r"><i class="fa fa-check"></i><b>3.1.3</b> What can I do with R</a></li>
<li class="chapter" data-level="3.1.4" data-path="intro-r.html"><a href="intro-r.html#quick-presentation-of-the-ecosystem"><i class="fa fa-check"></i><b>3.1.4</b> Quick presentation of the ecosystem</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="intro-r.html"><a href="intro-r.html#basic-commands-to-know"><i class="fa fa-check"></i><b>3.2</b> Basic commands to know</a></li>
<li class="chapter" data-level="3.3" data-path="intro-r.html"><a href="intro-r.html#data-structures-in-r"><i class="fa fa-check"></i><b>3.3</b> Data structures in R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="intro-r.html"><a href="intro-r.html#basic-data-structures"><i class="fa fa-check"></i><b>3.3.1</b> Basic data structures</a></li>
<li class="chapter" data-level="3.3.2" data-path="intro-r.html"><a href="intro-r.html#explore-a-new-data-structure-or-object"><i class="fa fa-check"></i><b>3.3.2</b> Explore a new data structure (or object)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manip.html"><a href="manip.html"><i class="fa fa-check"></i><b>4</b> Data manipulation</a><ul>
<li class="chapter" data-level="4.1" data-path="manip.html"><a href="manip.html#import"><i class="fa fa-check"></i><b>4.1</b> Import</a><ul>
<li class="chapter" data-level="4.1.1" data-path="manip.html"><a href="manip.html#text-files"><i class="fa fa-check"></i><b>4.1.1</b> Text files</a></li>
<li class="chapter" data-level="4.1.2" data-path="manip.html"><a href="manip.html#excel-files"><i class="fa fa-check"></i><b>4.1.2</b> Excel files</a></li>
<li class="chapter" data-level="4.1.3" data-path="manip.html"><a href="manip.html#more-formats"><i class="fa fa-check"></i><b>4.1.3</b> More formats</a></li>
<li class="chapter" data-level="4.1.4" data-path="manip.html"><a href="manip.html#read-from-databases-big-data"><i class="fa fa-check"></i><b>4.1.4</b> Read from databases / big data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="manip.html"><a href="manip.html#the-grammar-of-data-manipulation"><i class="fa fa-check"></i><b>4.2</b> The grammar of data manipulation</a><ul>
<li class="chapter" data-level="4.2.1" data-path="manip.html"><a href="manip.html#the-pipe"><i class="fa fa-check"></i><b>4.2.1</b> The pipe</a></li>
<li class="chapter" data-level="4.2.2" data-path="manip.html"><a href="manip.html#the-verbs-of-manipulation"><i class="fa fa-check"></i><b>4.2.2</b> The verbs of manipulation</a></li>
<li class="chapter" data-level="4.2.3" data-path="manip.html"><a href="manip.html#filter-conditions"><i class="fa fa-check"></i><b>4.2.3</b> Filter : conditions</a></li>
<li class="chapter" data-level="4.2.4" data-path="manip.html"><a href="manip.html#mutate"><i class="fa fa-check"></i><b>4.2.4</b> Mutate</a></li>
<li class="chapter" data-level="4.2.5" data-path="manip.html"><a href="manip.html#summarize"><i class="fa fa-check"></i><b>4.2.5</b> Summarize</a></li>
<li class="chapter" data-level="4.2.6" data-path="manip.html"><a href="manip.html#manipulate-several-data-in-the-same-time"><i class="fa fa-check"></i><b>4.2.6</b> Manipulate several data in the same time</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="manip.html"><a href="manip.html#lets-import-and-wrangle-some-data"><i class="fa fa-check"></i><b>4.3</b> Let’s import and wrangle some data !</a><ul>
<li class="chapter" data-level="4.3.1" data-path="manip.html"><a href="manip.html#the-data"><i class="fa fa-check"></i><b>4.3.1</b> The data</a></li>
<li class="chapter" data-level="4.3.2" data-path="manip.html"><a href="manip.html#one-tool-you-will-need-lapply"><i class="fa fa-check"></i><b>4.3.2</b> One tool you will need : <code>lapply()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="manip.html"><a href="manip.html#tidy-your-data"><i class="fa fa-check"></i><b>4.4</b> Tidy your data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="stats.html"><a href="stats.html"><i class="fa fa-check"></i><b>5</b> Statistics</a><ul>
<li class="chapter" data-level="5.1" data-path="stats.html"><a href="stats.html#definitions"><i class="fa fa-check"></i><b>5.1</b> Definitions</a><ul>
<li class="chapter" data-level="5.1.1" data-path="stats.html"><a href="stats.html#terminology"><i class="fa fa-check"></i><b>5.1.1</b> Terminology</a></li>
<li class="chapter" data-level="5.1.2" data-path="stats.html"><a href="stats.html#types-of-variables"><i class="fa fa-check"></i><b>5.1.2</b> Types of variables</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="stats.html"><a href="stats.html#univariate-statistics"><i class="fa fa-check"></i><b>5.2</b> Univariate statistics</a><ul>
<li class="chapter" data-level="5.2.1" data-path="stats.html"><a href="stats.html#numerical-variables"><i class="fa fa-check"></i><b>5.2.1</b> Numerical variables</a></li>
<li class="chapter" data-level="5.2.2" data-path="stats.html"><a href="stats.html#categorical-variables"><i class="fa fa-check"></i><b>5.2.2</b> Categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="stats.html"><a href="stats.html#bivariate-statistics"><i class="fa fa-check"></i><b>5.3</b> Bivariate statistics</a><ul>
<li class="chapter" data-level="5.3.1" data-path="stats.html"><a href="stats.html#continuous-variables"><i class="fa fa-check"></i><b>5.3.1</b> 2 continuous variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="stats.html"><a href="stats.html#categorical-variables-1"><i class="fa fa-check"></i><b>5.3.2</b> 2 categorical variables</a></li>
<li class="chapter" data-level="5.3.3" data-path="stats.html"><a href="stats.html#continuous-1-categorical-variable"><i class="fa fa-check"></i><b>5.3.3</b> 1 continuous, 1 categorical variable</a></li>
<li class="chapter" data-level="5.3.4" data-path="stats.html"><a href="stats.html#exercises-1"><i class="fa fa-check"></i><b>5.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="stats.html"><a href="stats.html#stat_inf"><i class="fa fa-check"></i><b>5.4</b> Statistical inference</a><ul>
<li class="chapter" data-level="5.4.1" data-path="stats.html"><a href="stats.html#the-statistical-model"><i class="fa fa-check"></i><b>5.4.1</b> The statistical model</a></li>
<li class="chapter" data-level="5.4.2" data-path="stats.html"><a href="stats.html#two-fundamental-theorems"><i class="fa fa-check"></i><b>5.4.2</b> Two fundamental theorems</a></li>
<li class="chapter" data-level="5.4.3" data-path="stats.html"><a href="stats.html#statistical-tests"><i class="fa fa-check"></i><b>5.4.3</b> Statistical tests</a></li>
<li class="chapter" data-level="5.4.4" data-path="stats.html"><a href="stats.html#other-estimators-maximum-of-likelihood"><i class="fa fa-check"></i><b>5.4.4</b> Other estimators : maximum of likelihood</a></li>
<li class="chapter" data-level="5.4.5" data-path="stats.html"><a href="stats.html#exercises-interprete-a-test-you-dont-know"><i class="fa fa-check"></i><b>5.4.5</b> Exercises : interprete a test you don’t know</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html"><i class="fa fa-check"></i><b>6</b> Multivariate analysis and dimension reduction</a><ul>
<li class="chapter" data-level="6.1" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#multivar"><i class="fa fa-check"></i><b>6.1</b> Multivariate analysis</a><ul>
<li class="chapter" data-level="6.1.1" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#adv_viz"><i class="fa fa-check"></i><b>6.1.1</b> Advanced visualization</a></li>
<li class="chapter" data-level="6.1.2" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#easily-explore-an-entire-dataset"><i class="fa fa-check"></i><b>6.1.2</b> Easily explore an entire dataset</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#multivariate-analysis-and-dimension-reduction-1"><i class="fa fa-check"></i><b>6.2</b> Multivariate analysis and dimension reduction</a><ul>
<li class="chapter" data-level="6.2.1" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#imputation"><i class="fa fa-check"></i><b>6.2.1</b> Imputation</a></li>
<li class="chapter" data-level="6.2.2" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#normalization"><i class="fa fa-check"></i><b>6.2.2</b> Normalization</a></li>
<li class="chapter" data-level="6.2.3" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#pca"><i class="fa fa-check"></i><b>6.2.3</b> PCA</a></li>
<li class="chapter" data-level="6.2.4" data-path="stats.html"><a href="stats.html#exercises"><i class="fa fa-check"></i><b>6.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#dimension-reduction"><i class="fa fa-check"></i><b>6.3</b> Dimension reduction</a><ul>
<li class="chapter" data-level="6.3.1" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#use-the-results-of-the-pca"><i class="fa fa-check"></i><b>6.3.1</b> Use the results of the PCA</a></li>
<li class="chapter" data-level="6.3.2" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#other-inertia-based-methods"><i class="fa fa-check"></i><b>6.3.2</b> Other inertia-based methods</a></li>
<li class="chapter" data-level="6.3.3" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#t-sne"><i class="fa fa-check"></i><b>6.3.3</b> t-SNE</a></li>
<li class="chapter" data-level="6.3.4" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#a-word-about-clustering"><i class="fa fa-check"></i><b>6.3.4</b> A word about clustering</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#visualization-bonus-dashboards-and-reports"><i class="fa fa-check"></i><b>6.4</b> Visualization bonus : dashboards and reports</a><ul>
<li class="chapter" data-level="6.4.1" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#shiny-and-rmarkdown"><i class="fa fa-check"></i><b>6.4.1</b> Shiny and rmarkdown</a></li>
<li class="chapter" data-level="6.4.2" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#web-based-graphics-with-plotly"><i class="fa fa-check"></i><b>6.4.2</b> Web-based graphics with <code>plotly</code></a></li>
<li class="chapter" data-level="6.4.3" data-path="multivariate-analysis-and-dimension-reduction.html"><a href="multivariate-analysis-and-dimension-reduction.html#other-packages-widgets"><i class="fa fa-check"></i><b>6.4.3</b> Other packages &amp; widgets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="reg.html"><a href="reg.html"><i class="fa fa-check"></i><b>7</b> Linear and logistic regression</a><ul>
<li class="chapter" data-level="7.1" data-path="reg.html"><a href="reg.html#linear-regression"><i class="fa fa-check"></i><b>7.1</b> Linear regression</a><ul>
<li class="chapter" data-level="7.1.1" data-path="reg.html"><a href="reg.html#general-presentation"><i class="fa fa-check"></i><b>7.1.1</b> General presentation</a></li>
<li class="chapter" data-level="7.1.2" data-path="reg.html"><a href="reg.html#coefficients-interpretation-and-inference"><i class="fa fa-check"></i><b>7.1.2</b> Coefficients interpretation and inference</a></li>
<li class="chapter" data-level="7.1.3" data-path="reg.html"><a href="reg.html#the-frischwaugh-theorem-and-the-omitted-variable-bias"><i class="fa fa-check"></i><b>7.1.3</b> The Frisch–Waugh Theorem and the omitted variable bias</a></li>
<li class="chapter" data-level="7.1.4" data-path="reg.html"><a href="reg.html#feature-engineering-and-functional-specification"><i class="fa fa-check"></i><b>7.1.4</b> Feature engineering and functional specification</a></li>
<li class="chapter" data-level="7.1.5" data-path="reg.html"><a href="reg.html#variable-selection"><i class="fa fa-check"></i><b>7.1.5</b> Variable selection</a></li>
<li class="chapter" data-level="7.1.6" data-path="stats.html"><a href="stats.html#exercises"><i class="fa fa-check"></i><b>7.1.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="reg.html"><a href="reg.html#logitic-regression"><i class="fa fa-check"></i><b>7.2</b> Logitic regression</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data exploration and statistics with R and the tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multivariate-analysis-and-dimension-reduction" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Multivariate analysis and dimension reduction</h1>
<div id="multivar" class="section level2">
<h2><span class="header-section-number">6.1</span> Multivariate analysis</h2>
<div id="adv_viz" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Advanced visualization</h3>
<div id="the-grammar-of-graphics" class="section level4">
<h4><span class="header-section-number">6.1.1.1</span> The grammar of graphics</h4>
<p>The grammar of graphics was introduced in 2005 by Wilkinson and Leland as a general framework for graphical representation of data. It was adapted by Hadley Wickham in the R package <code>ggplot2</code>.
<em>It presents a unique foundation for producing almost every quantitative graphic found in scientific journals, newspapers, statistical packages, and data visualization systems</em>.</p>
<p>You can check <a href="https://vita.had.co.nz/papers/layered-grammar.html">the paper</a> from Wickham</p>
<p>When ploting data, one has to define :</p>
<ul>
<li>What are the aesthetics <span class="math inline">\(\rightarrow\)</span> <strong>the dimensions you want to represent</strong></li>
<li>What is the geometry you want to use <span class="math inline">\(\rightarrow\)</span> <strong>the kind of plot you want</strong></li>
<li>Ploting options (that come with default values) :
<ul>
<li>scales of the axis</li>
<li>fonts and colors for text</li>
<li>labels (title, axis titles…)</li>
</ul></li>
</ul>
<p>In short, what you have to find is the right combination of aesthetics and geometry that best represent the data. To find the recommended combination, don’t forget to use <a href="https://www.data-to-viz.com/">From data to viz</a></p>
</div>
<div id="playing-with-aesthetics" class="section level4">
<h4><span class="header-section-number">6.1.1.2</span> Playing with aesthetics</h4>
<p>You must define at least 1 dimension for the plot, either continuous or categorical for the x axis. Then you can increase the number of dimensions (ie columns of the data frame) you want to represent :</p>
<ul>
<li>x and y for the axis</li>
<li>size : optional (integer) dimension that will represent an additional number</li>
<li>color/fill : optional (categorical) dimension reprensented by a color. Color is for line/point geoms, fill for bars/heatmap geoms</li>
<li>linetype : optional (categorical) : different type of lines (solid, dotted, dashed…). Only for geometries using lines</li>
<li>shape : optional (categorical) : variable that will make the shape of the dot vary. Only for point geometries</li>
<li>alpha : optional (continuous) : the transparency of the dots (the lower the value, the more transparent the dot)</li>
<li>…</li>
</ul>
<p>More about the aesthetics <a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">here</a></p>
<p>You can also use the <code>facet_wrap()</code> or <code>facet_grid()</code> functions to add up to 2 more dimensions with categorical variables (see demo)</p>
</div>
<div id="geometries" class="section level4">
<h4><span class="header-section-number">6.1.1.3</span> Geometries</h4>
<p>Once you chose the variables (dimensions) you want to plot, you have to chose the geometry, that highly depends on the type of variable (numerical or character/factor). Don’t forget to reffer to the website <em>from data to viz</em> if you need some inspiration.</p>
<p>A short list of most common geometries :</p>
<ul>
<li>geom_bar for barplots</li>
<li>geom_histogram for histograms</li>
<li>geom_jitter for scatter plots</li>
<li>geom_boxplot &amp; geom_violin for compared density plots</li>
<li>geom_tile for heatmaps</li>
<li>geom_line for time series</li>
<li>geom_text or geom_label for text (annotations)</li>
<li>geom_hline and geom_vline for horizontal and vertiacal lines</li>
<li>……</li>
</ul>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb214-1"></a><span class="co"># From </span></span>
<span id="cb214-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb214-2"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(<span class="dt">x=</span>distance)) <span class="op">+</span></span>
<span id="cb214-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb214-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb215-1"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(<span class="dt">x=</span>distance)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()<span class="op">+</span></span>
<span id="cb215-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb215-2"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-2.png" width="672" /></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb216-1"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(distance,avgSpeed)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()<span class="op">+</span></span>
<span id="cb216-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb216-2"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-3.png" width="672" /></p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb217-1"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(distance,avgSpeed,<span class="dt">color=</span>activity_recoded))  <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()<span class="op">+</span></span>
<span id="cb217-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb217-2"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-4.png" width="672" /></p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb218-1"></a><span class="co"># To </span></span>
<span id="cb218-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb218-2"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(<span class="dt">x=</span>avgSpeed,<span class="dt">y=</span>calories,<span class="dt">size=</span>duration,<span class="dt">color=</span>qual_distance,<span class="dt">shape=</span>qual_avgHr)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb218-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb218-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb218-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb218-4"></a><span class="st">  </span><span class="kw">facet_wrap</span>(.<span class="op">~</span><span class="st"> </span>activity_recoded,<span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)<span class="op">+</span></span>
<span id="cb218-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb218-5"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-5.png" width="672" /></p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb219-1"></a><span class="co"># Or maybe</span></span>
<span id="cb219-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb219-2"></a><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(<span class="dt">x=</span>avgSpeed,<span class="dt">y=</span>elevationGain,<span class="dt">size=</span>calories,<span class="dt">color=</span>duration)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb219-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb219-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb219-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb219-4"></a><span class="st">  </span><span class="kw">facet_grid</span>(activity_recoded<span class="op">~</span>qual_distance,<span class="dt">scales =</span> <span class="st">&quot;free&quot;</span> )<span class="op">+</span></span>
<span id="cb219-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb219-5"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-71-6.png" width="672" /></p>
</div>
<div id="important-options" class="section level4">
<h4><span class="header-section-number">6.1.1.4</span> Important options</h4>
<p>With ggplot, one can make publishable graphics that don’t need to be modified in another software. For that, the most useful functions are :</p>
<ul>
<li>scale_xx_yy : functions that allow you to tweak the axis’ scale, the colors used by either <code>color</code> or <code>fill</code> aesthetics (eg : <code>scale_color_manual()</code>) and other options.</li>
<li>labs : allows you to proper label title, axis’ titles, legend titles…</li>
<li>theme : allows you to tweak general parameters for the plot (font family, font size, margins, background colors…). You have several <code>theme_xx()</code> functions already defined with different default values for those parameters (eg <code>theme_minimal()</code> or <code>theme_void()</code>)</li>
<li>guides : allows you to modify the legend entries</li>
</ul>
<p>Whats you can also do is recode the levels of the factor variables to make them more understanble or reorder them if you want them to be displayed in a specific order. See <code>forcats::fct_recode()</code> and <code>forcats::fct_reorder()</code></p>
<p><strong>Hint :</strong> when working with strings, you can force a string to be split in 2 rows with <code>\n</code></p>
<p>Here is an example :</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-1"></a>dat_clean <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb220-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-2"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>avgSpeed,<span class="dt">y=</span>elevationGain,<span class="dt">size=</span>calories,<span class="dt">color=</span>duration,<span class="dt">size=</span>distance)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb220-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-3"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb220-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-4"></a><span class="st">  </span><span class="kw">facet_grid</span>(activity_recoded<span class="op">~</span>qual_distance,<span class="dt">scales =</span> <span class="st">&quot;free&quot;</span> ) <span class="op">+</span></span>
<span id="cb220-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-5"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb220-6"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Great insights&quot;</span>,<span class="dt">y=</span><span class="st">&quot;Total evelation&quot;</span>,<span class="dt">x=</span><span class="st">&quot;Average speed&quot;</span>,</span>
<span id="cb220-7"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-7"></a>       <span class="dt">color=</span><span class="st">&quot;Duration&quot;</span>,<span class="dt">size=</span><span class="st">&quot;Total distance&quot;</span>) <span class="op">+</span></span>
<span id="cb220-8"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-8"></a><span class="st">  </span><span class="co"># scale_color_manual(values = c(&quot;magenta&quot;,&quot;orange&quot;)) + </span></span>
<span id="cb220-9"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-9"></a><span class="st">  </span><span class="kw">scale_size_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>comma) <span class="op">+</span></span>
<span id="cb220-10"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-10"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>comma) <span class="op">+</span></span>
<span id="cb220-11"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-11"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>comma)<span class="op">+</span></span>
<span id="cb220-12"><a href="multivariate-analysis-and-dimension-reduction.html#cb220-12"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
</div>
<div id="some-tricks-with-ggplot" class="section level4">
<h4><span class="header-section-number">6.1.1.5</span> Some tricks with ggplot</h4>
<p>This approach (grammar of graphics) is very coherent but makes it sometimes difficult. For example, how can I represent the distribution of several variables (and not the distribution of one variable according to different sub-groups -meaning that there is a second dimension -) ?</p>
<div id="the-cheater-way" class="section level5">
<h5><span class="header-section-number">6.1.1.5.1</span> The cheater way</h5>
<p>You can brute-force the graph by superposing different geometries. But first, you’ll have to standardize the variables (they don’t have the same scale). Remember the usage to <code>across</code> to apply a function to a selection of variables.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb221-1"></a><span class="kw">mutate</span>(dat_clean,<span class="kw">across</span>(<span class="kw">where</span>(is.numeric),</span>
<span id="cb221-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb221-2"></a>                        <span class="cf">function</span>(xx) (xx<span class="op">-</span><span class="kw">mean</span>(xx,<span class="dt">na.rm=</span>T))<span class="op">/</span><span class="kw">sd</span>(xx,<span class="dt">na.rm=</span>T))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb221-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb221-3"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>(<span class="kw">aes</span>(distance),<span class="dt">color=</span><span class="st">&quot;blue&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb221-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb221-4"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="kw">aes</span>(duration),<span class="dt">color=</span><span class="st">&quot;red&quot;</span>)<span class="op">+</span></span>
<span id="cb221-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb221-5"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<p>This solution can be also used if you want to superpose different geometries (bars and lines, bars and hlines,…), and is in this case legal :D</p>
</div>
<div id="do-it-with-the-tidy-philosophy" class="section level5">
<h5><span class="header-section-number">6.1.1.5.2</span> Do it with the tidy philosophy</h5>
<p>You can reformulate this task as : I want to represent the distribution of one unique variable for 3 subgroups : age, churn and usage. I have to reshape the data first to create such a variable. For that I will use <code>tidyr::pivot_longer()</code> which helps me to transform columns into rows</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb222-1"></a>reshaped &lt;-<span class="st"> </span><span class="kw">select</span>(dat_clean,duration,distance) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb222-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb222-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">everything</span>(),<span class="dt">names_to=</span><span class="st">&quot;latent_variable&quot;</span>,<span class="dt">values_to=</span><span class="st">&quot;values&quot;</span>)</span>
<span id="cb222-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb222-3"></a>reshaped</span></code></pre></div>
<pre><code>## # A tibble: 10,250 x 2
##    latent_variable    values
##    &lt;chr&gt;               &lt;dbl&gt;
##  1 duration         3640221.
##  2 distance          300000 
##  3 duration        15064570.
##  4 distance        12293220.
##  5 duration        10382433.
##  6 distance         8360927.
##  7 duration         5393830.
##  8 distance         1792890.
##  9 duration         3626825.
## 10 distance         3492347.
## # … with 10,240 more rows</code></pre>
<p>Now I can use the latent_variable variable as a dimension in a classic ggplot statement, with a prior standardization</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb224-1"></a><span class="kw">group_by</span>(reshaped,latent_variable) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb224-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb224-2"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">values=</span>(values<span class="op">-</span><span class="kw">mean</span>(values,<span class="dt">na.rm =</span> T))<span class="op">/</span><span class="kw">sd</span>(values,<span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb224-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb224-3"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(values,<span class="dt">color=</span>latent_variable)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()<span class="op">+</span></span>
<span id="cb224-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb224-4"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<p>Or you can even skip the standardization step thanks to facets :</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb225-1"></a><span class="kw">ggplot</span>(reshaped,<span class="kw">aes</span>(values)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb225-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb225-2"></a><span class="st">  </span><span class="kw">facet_wrap</span>(.<span class="op">~</span>latent_variable,<span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>)<span class="op">+</span></span>
<span id="cb225-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb225-3"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
</div>
<div id="combine-different-plots-with-ggpubr" class="section level5">
<h5><span class="header-section-number">6.1.1.5.3</span> Combine different plots with ggpubr</h5>
<p>ggpubr makes your life much easier to make publication-ready graphics. It allows you for example to combine several ggplot graphics in a grid, regardless of any latent dimension that facet_grid would require. For that you have to store the graphics and “replay” them in a defined grid generated by <code>ggarrange()</code></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-1"></a><span class="co"># install.packages(&quot;ggpubr&quot;)</span></span>
<span id="cb226-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-2"></a><span class="kw">require</span>(ggpubr)</span>
<span id="cb226-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-3"></a>gg1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(distance)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>() <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Age distribution&quot;</span>)<span class="op">+</span></span>
<span id="cb226-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-4"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span>
<span id="cb226-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-5"></a>gg2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(dat_clean,<span class="kw">aes</span>(<span class="dt">x=</span>avgSpeed,<span class="dt">y=</span>elevationGain,<span class="dt">size=</span>calories,<span class="dt">color=</span>duration,<span class="dt">size=</span>distance)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb226-6"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-6"></a><span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb226-7"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-7"></a><span class="st">  </span><span class="kw">facet_grid</span>(activity_recoded<span class="op">~</span>qual_distance,<span class="dt">scales =</span> <span class="st">&quot;free&quot;</span> ) <span class="op">+</span></span>
<span id="cb226-8"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-8"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Beautiful but useless plot&quot;</span>)<span class="op">+</span></span>
<span id="cb226-9"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-9"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span>
<span id="cb226-10"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-10"></a></span>
<span id="cb226-11"><a href="multivariate-analysis-and-dimension-reduction.html#cb226-11"></a><span class="kw">ggarrange</span>(gg1,gg2,<span class="dt">ncol =</span> <span class="dv">2</span>,<span class="dt">widths =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-77-1.png" width="768" /></p>
<p>There are a lot of options in this function (common legend, height and width of each plot,…). You can check the full <a href="http://www.sthda.com/english/articles/24-ggpubr-publication-ready-plots/">documentation of this package</a>.</p>
<p>Note that you can mix tables and graphics with this function. Tables can be rendered as ggplot object with <code>ggpubr::ggtexttable()</code></p>
</div>
</div>
</div>
<div id="easily-explore-an-entire-dataset" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Easily explore an entire dataset</h3>
<p>Now, you know how to to one graph including several dimensions. To explore a new dataset and identify the correlations between them, you can visualize at a glance all variables in a datasets and their correlations with <code>GGally</code></p>
<div id="scatter-plot-matrix" class="section level4">
<h4><span class="header-section-number">6.1.2.1</span> Scatter plot matrix</h4>
<p>The scatter plot matrix shows the correlations between all variables and helps you to spot dependencies between them. We can use either the basic <code>plot()</code> function on the dataframe or the GGally package which provides extensions to ggplot.
Side note : the ggpairs function does a lot of computation and can take a lot of time ! <span class="math inline">\(\rightarrow\)</span> if your dataset is large, you should run it only on a sample of the observations with <code>dplyr::sample_n()</code> or <code>dplyr::sample_frac()</code>.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb227-1"></a><span class="kw">select</span>(dat_clean,distance,duration,avgHr,avgSpeed,avgPower,</span>
<span id="cb227-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb227-2"></a>       calories,elevationGain,avgBikeCadence,activity_recoded) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb227-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb227-3"></a><span class="st">  </span><span class="kw">plot</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-78-1.png" width="672" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb228-1"></a><span class="co"># install.packages(&quot;GGally&quot;)</span></span>
<span id="cb228-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb228-2"></a><span class="kw">require</span>(GGally)</span>
<span id="cb228-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb228-3"></a><span class="kw">select</span>(dat_clean,distance,duration,avgSpeed,</span>
<span id="cb228-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb228-4"></a>       calories,activity_recoded) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb228-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb228-5"></a><span class="st">  </span>GGally<span class="op">::</span><span class="kw">ggpairs</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-78-2.png" width="672" /></p>
</div>
<div id="correlation-plots" class="section level4">
<h4><span class="header-section-number">6.1.2.2</span> Correlation plots</h4>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb229-1"></a><span class="kw">select</span>(dat_clean,distance,duration,avgHr,avgSpeed,avgPower,</span>
<span id="cb229-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb229-2"></a>       calories,elevationGain,avgDoubleCadence,activity_recoded)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb229-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb229-3"></a><span class="st">  </span>GGally<span class="op">::</span><span class="kw">ggcorr</span>(<span class="dt">geom =</span> <span class="st">&quot;circle&quot;</span>)</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="multivariate-analysis-and-dimension-reduction-1" class="section level2">
<h2><span class="header-section-number">6.2</span> Multivariate analysis and dimension reduction</h2>
<p>In this section, we will focus on the bike activities, which have the highest number of metrics. However, before we can go further, we have to deal with missing data and scale them to avoid that the column with a large order of magnitude are over-weighted.</p>
<div id="imputation" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Imputation</h3>
<p>So far, we have ignored the missing values because we were computing summary statistics on one or 2 variables. The problem when taking into account more columns is that the probability of having one missing value on one of these features is higher, and therefore the risk that the whole observation is ignored increases. Every observation should still contain some original information that an analysis (or a model) should reflect. To avoid to ignore to many observations because of missing data we perform <strong>imputation</strong>, meaning that we replace the missing value with a true value. Many methods can be used to that end :</p>
<p>For numeric variables</p>
<ul>
<li>Imputation with a random value from the sample</li>
<li>Imputation with the mean/median</li>
<li>Imputation with the nearest neighbours (k-nn)</li>
<li>Hotdeck</li>
<li>Imputation with a model (regression)</li>
</ul>
<p>For categorical variables :</p>
<ul>
<li>Imputation with random category selection</li>
<li>Imputation with the most frequent category (total or of the neighbours)</li>
<li>Hotdeck</li>
<li>Model-based imputation</li>
</ul>
<p>The challenge here is to chose between “reflecting the instance’s originality” or “not creating noise”</p>
<p>The following code counts the number of missing values per column and does a simple mean or median imputation. We will practice hte imputation via regression in the final chapter’s exercises.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb230-1"></a>dat_bike &lt;-<span class="st"> </span><span class="kw">filter</span>(dat_clean,is_bike) <span class="co"># Bike activities</span></span>
<span id="cb230-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb230-2"></a><span class="kw">sapply</span>(dat_bike,<span class="cf">function</span>(xx) <span class="kw">sum</span>(<span class="kw">is.na</span>(xx)))</span></code></pre></div>
<pre><code>##              activityId                 uuidMsb                 uuidLsb 
##                       0                     932                     932 
##                    name            activityType           userProfileId 
##                     229                       0                       0 
##              timeZoneId          beginTimestamp             eventTypeId 
##                       0                       0                       0 
##                    rule               sportType            startTimeGmt 
##                       0                    1262                       0 
##          startTimeLocal                duration                distance 
##                       0                       0                       1 
##           elevationGain           elevationLoss                avgSpeed 
##                     175                     176                       2 
##                maxSpeed                   avgHr                   maxHr 
##                     495                     665                     664 
##                calories          startLongitude           startLatitude 
##                       2                     583                     583 
##   aerobicTrainingEffect    avgFractionalCadence    maxFractionalCadence 
##                    1376                       0                       0 
##         elapsedDuration          movingDuration anaerobicTrainingEffect 
##                    1189                    1528                    2021 
##                deviceId          minTemperature          maxTemperature 
##                     852                    1000                    1000 
##            minElevation            maxElevation            locationName 
##                    1018                    1018                    1781 
##        maxVerticalSpeed                lapCount            endLongitude 
##                    1708                    1642                    2186 
##             endLatitude              activeSets               totalSets 
##                    2186                    1855                    1855 
##               totalReps              purposeful        autoCalcCalories 
##                    1855                       0                    1246 
##                favorite                      pr      elevationCorrected 
##                       0                       0                     871 
##             atpActivity                  parent           maxRunCadence 
##                    1828                     474                    2491 
##                   steps  avgVerticalOscillation    avgGroundContactTime 
##                    2491                    2492                    2492 
##         avgStrideLength             vO2MaxValue        avgVerticalRatio 
##                    2491                    2289                    2492 
## avgGroundContactBalance        avgDoubleCadence        maxDoubleCadence 
##                    2492                    2491                    2491 
##                avgPower          avgBikeCadence          maxBikeCadence 
##                    1832                    1188                    1188 
##                 strokes               normPower          avgLeftBalance 
##                    1197                    1832                    1896 
##         avgRightBalance           max20MinPower     trainingStressScore 
##                    1896                    1838                    1881 
##         intensityFactor     lactateThresholdBpm   lactateThresholdSpeed 
##                    1881                    2492                    2492 
##              avgStrokes           activeLengths                avgSwolf 
##                    2492                    2311                    2492 
##              poolLength       avgStrokeDistance          avgSwimCadence 
##                    2492                    2492                    2492 
##          maxSwimCadence                  maxFtp               workoutId 
##                    2492                    2435                    2381 
##                decoDive                parentId        avgVerticalSpeed 
##                    2492                    2479                    2492 
##                maxDepth                avgDepth         surfaceInterval 
##                    2492                    2492                    2492 
##         floorsDescended              bottomTime              start_time 
##                    2492                    2492                       0 
##                    date                 is_bike                  is_run 
##                       0                       0                       0 
##        activity_recoded           qual_distance              qual_avgHr 
##                       0                       0                     914</code></pre>
<p>For this use case, we will use a median imputation, because for some of the variables, the mean would not make sense (eg longitude and latitude).</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb232-1"></a>dat_bike_imp &lt;-<span class="st"> </span><span class="kw">mutate</span>(dat_bike,<span class="kw">across</span>(<span class="kw">where</span>(is.numeric),</span>
<span id="cb232-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb232-2"></a>                                   <span class="cf">function</span>(xx) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(xx),<span class="kw">mean</span>(xx,<span class="dt">na.rm=</span>T),xx)))</span>
<span id="cb232-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb232-3"></a><span class="kw">sapply</span>(dat_bike_imp,<span class="cf">function</span>(xx) <span class="kw">sum</span>(<span class="kw">is.na</span>(xx)))</span></code></pre></div>
<pre><code>##              activityId                 uuidMsb                 uuidLsb 
##                       0                     932                     932 
##                    name            activityType           userProfileId 
##                     229                       0                       0 
##              timeZoneId          beginTimestamp             eventTypeId 
##                       0                       0                       0 
##                    rule               sportType            startTimeGmt 
##                       0                    1262                       0 
##          startTimeLocal                duration                distance 
##                       0                       0                       0 
##           elevationGain           elevationLoss                avgSpeed 
##                       0                       0                       0 
##                maxSpeed                   avgHr                   maxHr 
##                       0                       0                       0 
##                calories          startLongitude           startLatitude 
##                       0                       0                       0 
##   aerobicTrainingEffect    avgFractionalCadence    maxFractionalCadence 
##                       0                       0                       0 
##         elapsedDuration          movingDuration anaerobicTrainingEffect 
##                       0                       0                       0 
##                deviceId          minTemperature          maxTemperature 
##                     852                       0                       0 
##            minElevation            maxElevation            locationName 
##                       0                       0                    1781 
##        maxVerticalSpeed                lapCount            endLongitude 
##                       0                       0                       0 
##             endLatitude              activeSets               totalSets 
##                       0                       0                       0 
##               totalReps              purposeful        autoCalcCalories 
##                       0                       0                    1246 
##                favorite                      pr      elevationCorrected 
##                       0                       0                     871 
##             atpActivity                  parent           maxRunCadence 
##                    1828                     474                       0 
##                   steps  avgVerticalOscillation    avgGroundContactTime 
##                       0                    2492                    2492 
##         avgStrideLength             vO2MaxValue        avgVerticalRatio 
##                    2491                       0                    2492 
## avgGroundContactBalance        avgDoubleCadence        maxDoubleCadence 
##                    2492                       0                       0 
##                avgPower          avgBikeCadence          maxBikeCadence 
##                       0                       0                       0 
##                 strokes               normPower          avgLeftBalance 
##                       0                       0                       0 
##         avgRightBalance           max20MinPower     trainingStressScore 
##                       0                       0                       0 
##         intensityFactor     lactateThresholdBpm   lactateThresholdSpeed 
##                       0                    2492                    2492 
##              avgStrokes           activeLengths                avgSwolf 
##                    2492                       0                    2492 
##              poolLength       avgStrokeDistance          avgSwimCadence 
##                    2492                    2492                    2492 
##          maxSwimCadence                  maxFtp               workoutId 
##                    2492                       0                    2381 
##                decoDive                parentId        avgVerticalSpeed 
##                    2492                    2479                    2492 
##                maxDepth                avgDepth         surfaceInterval 
##                    2492                    2492                    2492 
##         floorsDescended              bottomTime              start_time 
##                    2492                    2492                       0 
##                    date                 is_bike                  is_run 
##                       0                       0                       0 
##        activity_recoded           qual_distance              qual_avgHr 
##                       0                       0                     914</code></pre>
<p>Let’s do the same for categorical (maximum frequency), even though it is not mandatory for PCA.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-1"></a>most_freq_cat &lt;-<span class="st"> </span><span class="cf">function</span>(xx)</span>
<span id="cb234-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-2"></a>{</span>
<span id="cb234-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-3"></a>  tab &lt;-<span class="st"> </span><span class="kw">table</span>(xx)</span>
<span id="cb234-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-4"></a>  <span class="kw">return</span>(<span class="kw">names</span>(tab[<span class="kw">which.max</span>(tab)]))</span>
<span id="cb234-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-5"></a>}</span>
<span id="cb234-6"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-6"></a></span>
<span id="cb234-7"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-7"></a>dat_bike_imp &lt;-<span class="st"> </span><span class="kw">mutate</span>(dat_bike_imp,<span class="kw">across</span>(<span class="kw">where</span>(is.character),</span>
<span id="cb234-8"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-8"></a>                                           <span class="cf">function</span>(xx) <span class="kw">coalesce</span>(xx,<span class="kw">most_freq_cat</span>(xx))))</span>
<span id="cb234-9"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-9"></a></span>
<span id="cb234-10"><a href="multivariate-analysis-and-dimension-reduction.html#cb234-10"></a><span class="kw">sapply</span>(dat_bike_imp,<span class="cf">function</span>(xx) <span class="kw">sum</span>(<span class="kw">is.na</span>(xx)))</span></code></pre></div>
<pre><code>##              activityId                 uuidMsb                 uuidLsb 
##                       0                       0                       0 
##                    name            activityType           userProfileId 
##                       0                       0                       0 
##              timeZoneId          beginTimestamp             eventTypeId 
##                       0                       0                       0 
##                    rule               sportType            startTimeGmt 
##                       0                       0                       0 
##          startTimeLocal                duration                distance 
##                       0                       0                       0 
##           elevationGain           elevationLoss                avgSpeed 
##                       0                       0                       0 
##                maxSpeed                   avgHr                   maxHr 
##                       0                       0                       0 
##                calories          startLongitude           startLatitude 
##                       0                       0                       0 
##   aerobicTrainingEffect    avgFractionalCadence    maxFractionalCadence 
##                       0                       0                       0 
##         elapsedDuration          movingDuration anaerobicTrainingEffect 
##                       0                       0                       0 
##                deviceId          minTemperature          maxTemperature 
##                       0                       0                       0 
##            minElevation            maxElevation            locationName 
##                       0                       0                       0 
##        maxVerticalSpeed                lapCount            endLongitude 
##                       0                       0                       0 
##             endLatitude              activeSets               totalSets 
##                       0                       0                       0 
##               totalReps              purposeful        autoCalcCalories 
##                       0                       0                    1246 
##                favorite                      pr      elevationCorrected 
##                       0                       0                     871 
##             atpActivity                  parent           maxRunCadence 
##                    1828                     474                       0 
##                   steps  avgVerticalOscillation    avgGroundContactTime 
##                       0                    2492                    2492 
##         avgStrideLength             vO2MaxValue        avgVerticalRatio 
##                       0                       0                    2492 
## avgGroundContactBalance        avgDoubleCadence        maxDoubleCadence 
##                    2492                       0                       0 
##                avgPower          avgBikeCadence          maxBikeCadence 
##                       0                       0                       0 
##                 strokes               normPower          avgLeftBalance 
##                       0                       0                       0 
##         avgRightBalance           max20MinPower     trainingStressScore 
##                       0                       0                       0 
##         intensityFactor     lactateThresholdBpm   lactateThresholdSpeed 
##                       0                    2492                    2492 
##              avgStrokes           activeLengths                avgSwolf 
##                    2492                       0                    2492 
##              poolLength       avgStrokeDistance          avgSwimCadence 
##                    2492                    2492                    2492 
##          maxSwimCadence                  maxFtp               workoutId 
##                    2492                       0                       0 
##                decoDive                parentId        avgVerticalSpeed 
##                    2492                       0                    2492 
##                maxDepth                avgDepth         surfaceInterval 
##                    2492                    2492                    2492 
##         floorsDescended              bottomTime              start_time 
##                    2492                    2492                       0 
##                    date                 is_bike                  is_run 
##                       0                       0                       0 
##        activity_recoded           qual_distance              qual_avgHr 
##                       0                       0                       0</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-1"></a><span class="co"># replacements &lt;-   select(dat_bike_imp,activityId,where(is.character)) %&gt;%</span></span>
<span id="cb236-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-2"></a><span class="co">#   pivot_longer(-activityId,names_to=&quot;name&quot;,values_to=&quot;val&quot;) %&gt;% </span></span>
<span id="cb236-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-3"></a><span class="co">#   filter(!is.na(val)) %&gt;% </span></span>
<span id="cb236-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-4"></a><span class="co">#   group_by(name,val) %&gt;% </span></span>
<span id="cb236-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-5"></a><span class="co">#   summarise(cat_nb=n()) %&gt;% </span></span>
<span id="cb236-6"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-6"></a><span class="co">#   arrange(name,-cat_nb) %&gt;% </span></span>
<span id="cb236-7"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-7"></a><span class="co">#   group_by(name) %&gt;% </span></span>
<span id="cb236-8"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-8"></a><span class="co">#   summarise(most_freq=first(val)) %&gt;% </span></span>
<span id="cb236-9"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-9"></a><span class="co">#   pivot_wider(names_from = name,values_from=most_freq) %&gt;% </span></span>
<span id="cb236-10"><a href="multivariate-analysis-and-dimension-reduction.html#cb236-10"></a><span class="co">#   rename_with(function(xx) paste0(xx,&quot;_imp&quot;))</span></span></code></pre></div>
</div>
<div id="normalization" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Normalization</h3>
<p>Normalization is the operation consisting in scaling the columns so that their unit do not matter in the end. For example, the distance in meter is much larger than the cadence or the power, which have totally different units. To normalize the columns and make them unit-less, there are several methods among which the most common are the following :</p>
<ul>
<li>Standardization : <span class="math inline">\(X_i^{std} = \dfrac{X_i-\bar{X}}{\sigma_X} \rightarrow\)</span> mean 0 and standard deviation 1</li>
<li>Min-Max scaling : <span class="math inline">\(X_i^{std} = \dfrac{X_i-min(X)}{max(X)-min(X)} \rightarrow\)</span> between 0 and 1</li>
<li>Robust standardization <span class="math inline">\(X_i^{std} = \dfrac{X_i-Q2(X)}{Q3(X)-Q1(X)} \rightarrow\)</span> similar to the first option but robust to outliers</li>
</ul>
<p>You can check <a href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.preprocessing">scikit-learn documentation</a> to see what other options you have (and then search for their R implementation).</p>
<p>Normalization is a mandatory step before fitting a model, in order to avoid that only one feature bears the majority of the variance and makes the model biased.</p>
</div>
<div id="pca" class="section level3">
<h3><span class="header-section-number">6.2.3</span> PCA</h3>
<p>Principal Components Analysis (PCA) is often seen by machine learning engineers as a dimension reduction technique, but it is also a very powerful tool to explore your data (and it was designed for that purpose <span class="math inline">\(\rightarrow\)</span> IQ test). PCA applies on numerical variables only and aims to <strong>create new synthetic and uncorrelated variables, princpipal components</strong> (as a linear combination of the original variables) such that the <em>inertia</em> (ie variance) is highly concentrated on a small number of variables.</p>
<p>The mathematical problem is to find eigenvalues and eigenvectors of the correlation matrix. The eigenvectors represent the linear combination of the original variables needed to design thos new variables, and the eigenvalues the variance that each of these new value bears. Once those new variable have been found, graphical representations with few dimensions are possible.</p>
<p>To apply PCA, we will use the <code>FactoMineR</code> package, very easy to use for multivariate analysis.</p>
<p><strong>Notes</strong> :</p>
<ul>
<li>You can have supplementary continuous or categorical variables. They won’t be used in the construction of the eigenvectors, but you will be able to place them in the newly defined vector space.</li>
<li>By default, almost all implementations of PCA standardizes the data, so you do not have to do it by yourself, but check in the documentation of the function you use</li>
</ul>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-1"></a><span class="co"># install.packages(&quot;FactoMineR&quot;)</span></span>
<span id="cb237-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-2"></a><span class="kw">require</span>(FactoMineR)</span>
<span id="cb237-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-3"></a>acp_dat &lt;-<span class="st"> </span><span class="kw">select</span>(dat_bike_imp,deviceId,duration,distance,elevationGain,elevationLoss,avgSpeed,avgHr,calories,</span>
<span id="cb237-4"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-4"></a>              minTemperature,maxTemperature,lapCount,avgBikeCadence,avgPower,vO2MaxValue,</span>
<span id="cb237-5"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-5"></a>              max20MinPower) </span>
<span id="cb237-6"><a href="multivariate-analysis-and-dimension-reduction.html#cb237-6"></a>acp &lt;-<span class="st">   </span><span class="kw">PCA</span>(acp_dat,<span class="dt">graph =</span> F,<span class="dt">quali.sup =</span> <span class="kw">c</span>(<span class="dv">1</span>))</span></code></pre></div>
<p>What’s in this new object ?</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb238-1"></a><span class="kw">str</span>(acp)</span></code></pre></div>
<pre><code>## List of 6
##  $ eig      : num [1:14, 1:3] 4.71 2.03 1.65 1.31 1.26 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:14] &quot;comp 1&quot; &quot;comp 2&quot; &quot;comp 3&quot; &quot;comp 4&quot; ...
##   .. ..$ : chr [1:3] &quot;eigenvalue&quot; &quot;percentage of variance&quot; &quot;cumulative percentage of variance&quot;
##  $ var      :List of 4
##   ..$ coord  : num [1:14, 1:5] 0.802 0.906 0.475 0.487 0.661 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:14] &quot;duration&quot; &quot;distance&quot; &quot;elevationGain&quot; &quot;elevationLoss&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ cor    : num [1:14, 1:5] 0.802 0.906 0.475 0.487 0.661 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:14] &quot;duration&quot; &quot;distance&quot; &quot;elevationGain&quot; &quot;elevationLoss&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ cos2   : num [1:14, 1:5] 0.644 0.821 0.225 0.237 0.437 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:14] &quot;duration&quot; &quot;distance&quot; &quot;elevationGain&quot; &quot;elevationLoss&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ contrib: num [1:14, 1:5] 13.67 17.43 4.78 5.03 9.28 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:14] &quot;duration&quot; &quot;distance&quot; &quot;elevationGain&quot; &quot;elevationLoss&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##  $ ind      :List of 4
##   ..$ coord  : num [1:2492, 1:5] 7.44 1.79 -1.3 3.28 3.48 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:2492] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ cos2   : num [1:2492, 1:5] 0.6847 0.0898 0.139 0.396 0.4002 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:2492] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ contrib: num [1:2492, 1:5] 0.4721 0.0274 0.0143 0.0916 0.1032 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:2492] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ dist   : Named num [1:2492] 9 5.99 3.48 5.21 5.5 ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:2492] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ svd      :List of 3
##   ..$ vs: num [1:14] 2.17 1.43 1.29 1.15 1.12 ...
##   ..$ U : num [1:2492, 1:5] 3.43 0.826 -0.598 1.511 1.604 ...
##   ..$ V : num [1:14, 1:5] 0.37 0.417 0.219 0.224 0.305 ...
##  $ quali.sup:List of 5
##   ..$ coord : num [1:9, 1:5] 0.797 -0.466 0.288 0.187 -0.311 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:9] &quot;3454054575&quot; &quot;3825981698&quot; &quot;3842681113&quot; &quot;3858417560&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ cos2  : num [1:9, 1:5] 0.2472 0.0613 0.0381 0.0196 0.1877 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:9] &quot;3454054575&quot; &quot;3825981698&quot; &quot;3842681113&quot; &quot;3858417560&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ v.test: num [1:9, 1:5] 0.52 -1.517 0.265 0.15 -1.386 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:9] &quot;3454054575&quot; &quot;3825981698&quot; &quot;3842681113&quot; &quot;3858417560&quot; ...
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##   ..$ dist  : Named num [1:9] 1.604 1.882 1.475 1.338 0.719 ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:9] &quot;3454054575&quot; &quot;3825981698&quot; &quot;3842681113&quot; &quot;3858417560&quot; ...
##   ..$ eta2  : num [1, 1:5] 0.148 0.0795 0.0733 0.1403 0.044
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr &quot;deviceId&quot;
##   .. .. ..$ : chr [1:5] &quot;Dim.1&quot; &quot;Dim.2&quot; &quot;Dim.3&quot; &quot;Dim.4&quot; ...
##  $ call     :List of 10
##   ..$ row.w     : num [1:2492] 0.000401 0.000401 0.000401 0.000401 0.000401 ...
##   ..$ col.w     : num [1:14] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ scale.unit: logi TRUE
##   ..$ ncp       : num 5
##   ..$ centre    : num [1:14] 4.67e+06 2.98e+06 3.87e+04 3.76e+04 5.58e-01 ...
##   ..$ ecart.type: num [1:14] 3.54e+06 3.50e+06 1.14e+05 1.12e+05 3.30e-01 ...
##   ..$ X         :&#39;data.frame&#39;:	2492 obs. of  15 variables:
##   .. ..$ deviceId      : Factor w/ 9 levels &quot;3454054575&quot;,&quot;3825981698&quot;,..: 9 9 2 9 9 9 9 2 2 9 ...
##   .. ..$ duration      : num [1:2492] 15064570 10382433 3626825 8509404 8428058 ...
##   .. ..$ distance      : num [1:2492] 12293220 8360927 3492347 7991330 7420050 ...
##   .. ..$ elevationGain : num [1:2492] 200100 74500 16000 61900 111700 ...
##   .. ..$ elevationLoss : num [1:2492] 196800 74200 0 61100 111400 ...
##   .. ..$ avgSpeed      : num [1:2492] 0.816 0.805 0.963 0.939 0.88 ...
##   .. ..$ avgHr         : num [1:2492] 144 117 138 140 140 126 138 128 120 151 ...
##   .. ..$ calories      : num [1:2492] 16345 8745 3084 9327 9126 ...
##   .. ..$ minTemperature: num [1:2492] 19 18 18.3 21 22 ...
##   .. ..$ maxTemperature: num [1:2492] 29 29 26.2 30 32 ...
##   .. ..$ lapCount      : num [1:2492] 25 17 1 16 15 19 17 1 1 36 ...
##   .. ..$ avgBikeCadence: num [1:2492] 83 82 91 88 87 82 86 87 86 88 ...
##   .. ..$ avgPower      : num [1:2492] 260 202 212 263 259 210 263 213 197 240 ...
##   .. ..$ vO2MaxValue   : num [1:2492] 72 71 64 71 71 ...
##   .. ..$ max20MinPower : num [1:2492] 375 243 221 287 311 ...
##   ..$ row.w.init: num [1:2492] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ call      : language PCA(X = acp_dat, quali.sup = c(1), graph = F)
##   ..$ quali.sup :List of 5
##   .. ..$ quali.sup :&#39;data.frame&#39;:	2492 obs. of  1 variable:
##   .. .. ..$ deviceId: Factor w/ 9 levels &quot;3454054575&quot;,&quot;3825981698&quot;,..: 9 9 2 9 9 9 9 2 2 9 ...
##   .. ..$ modalite  : int 9
##   .. ..$ nombre    : num [1:9] 2 49 4 3 90 ...
##   .. ..$ barycentre:&#39;data.frame&#39;:	9 obs. of  14 variables:
##   .. .. ..$ duration      : num [1:9] 5815565 3745269 4374888 6604228 3170817 ...
##   .. .. ..$ distance      : num [1:9] 4241698 3402440 3889997 3052773 2049856 ...
##   .. .. ..$ elevationGain : num [1:9] 41595 36724 28707 49032 41914 ...
##   .. .. ..$ elevationLoss : num [1:9] 41333 0 30194 46806 41646 ...
##   .. .. ..$ avgSpeed      : num [1:9] 0.701 0.904 0.812 0.264 0.622 ...
##   .. .. ..$ avgHr         : num [1:9] 145 132 125 134 127 ...
##   .. .. ..$ calories      : num [1:9] 7924 3533 2740 4260 3524 ...
##   .. .. ..$ minTemperature: num [1:9] 18.3 18.3 18.3 18.3 18.3 ...
##   .. .. ..$ maxTemperature: num [1:9] 26.2 26.2 26.2 26.2 26.2 ...
##   .. .. ..$ lapCount      : num [1:9] 10.15 1.29 10.15 10.15 10.15 ...
##   .. .. ..$ avgBikeCadence: num [1:9] 95.5 90.8 84.1 85.3 91.1 ...
##   .. .. ..$ avgPower      : num [1:9] 241 228 241 241 241 ...
##   .. .. ..$ vO2MaxValue   : num [1:9] 64 64 64 64 64 ...
##   .. .. ..$ max20MinPower : num [1:9] 272 259 272 272 272 ...
##   .. ..$ numero    : num 1
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;PCA&quot; &quot;list &quot;</code></pre>
<p>This is a list with several elements :</p>
<ul>
<li><code>eig</code> contains the eigenvalues, and their share in the total inertia (PCA is performed by default on scaled variables <span class="math inline">\(\rightarrow\)</span> the trace of the diagonal matrix equals to the number of columns)</li>
<li><code>ind</code> and <code>var</code> refer to rows and columns. They both have the same elements : “coord” for the coordinate on each principal component, “contr” the contribution to the inertia of this row (resp column) to the inertia of the component, “cos2” the squared cosine (ie quality of projection) for the row/column</li>
<li><code>quali.sup</code> have the same elements than the previous ones (coordinates are the barycenter of each category of the qualitative variable)</li>
</ul>
<p>The first thing is to have a look at the eignevalues to see how well the PCA could summarize the information</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb240-1"></a><span class="kw">barplot</span>(acp<span class="op">$</span>eig[,<span class="dv">2</span>])</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb241-1"></a><span class="kw">barplot</span>(acp<span class="op">$</span>eig[,<span class="dv">3</span>])</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-85-2.png" width="672" /></p>
<p>In our case, the first component bears 35% of the total inertia and the second 15%. Hence, the first factorial plane (the first 2 components) : let’s look at how the variable correlate with them :</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb242-1"></a><span class="kw">plot.PCA</span>(acp,<span class="dt">choix=</span><span class="st">&quot;var&quot;</span>,<span class="dt">col.var =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<p>What you can read at once on this plot is how important each variable is to construct the new variables. As a matter of fact, contribution, cos2 and coordinates are almost the same in PCA, meaning that the closer to the unit disc the coordinate is, the high are also contribution and quality of representation.</p>
<p>What we deduct from this graph :</p>
<ul>
<li>Distance, calories and duration have the largest values on the first component <span class="math inline">\(\rightarrow\)</span> they contribute largely to the first component, which bears the 35% of total variance <span class="math inline">\(\rightarrow\)</span> those variables are the most discriminant</li>
<li>Those three variables are very close to each other, which means they are highly correlated</li>
<li>The average cadence is on the other side of the first component <span class="math inline">\(\righarrow\)</span> it is negatively correlated with those variables</li>
<li>There is a right angle between elevationGain and avgPower <span class="math inline">\(\rightarrow\)</span> the correlation is very small</li>
</ul>
<p>Let’s check the correlation matrix to be sure about what we are reading here</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb243-1"></a><span class="kw">select</span>(acp_dat,<span class="op">-</span>deviceId) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb243-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb243-2"></a><span class="st">  </span><span class="kw">cor</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb243-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb243-3"></a><span class="st">  </span>corrplot<span class="op">::</span><span class="kw">corrplot</span>()</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>How about the individuals ?</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb244-1"></a><span class="kw">plot.PCA</span>(acp,<span class="dt">choix=</span><span class="st">&quot;ind&quot;</span>)</span></code></pre></div>
<p><img src="DataExploration_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p>This graph is harder to read, but we still can identify outliers and understand wht they are. Anyway in the top-right corner, those are long rides with a lot of ups and downs ! The most extreme is 380343030 which is another measurement error (indoor cycling with 34000 elevation meters !)</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Exercises</h3>
<ul>
<li>Remove the measurement errors and re-run the PCA ; what are the changes ?</li>
<li>Let’s focus the running activities : select relevant features, impute the missing values using k-nn, run a PCA and analyze the results</li>
</ul>
</div>
</div>
<div id="dimension-reduction" class="section level2">
<h2><span class="header-section-number">6.3</span> Dimension reduction</h2>
<p>Dimension reduction aims to reduce the size of the data ; most of the time the goal is to decrease the number of columns but it can also apply to rows (depending on your use case). Why reduce the dimension :</p>
<ul>
<li>Avoid the <a href="https://en.wikipedia.org/wiki/Curse_of_dimensionality">curse of dimensionality</a></li>
<li>Remove undesired noise</li>
<li>Avoid <a href="https://en.wikipedia.org/wiki/Multicollinearity">multicollinearity</a> in the features</li>
</ul>
<div id="use-the-results-of-the-pca" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Use the results of the PCA</h3>
<p>After performing a PCA, you can select a limited number of principal components that you will use further in the modeling task. You can chose the number of components to keep with several criteria :</p>
<ul>
<li>average inertia (eigenvalue &gt; 1)</li>
<li>minimal total inertia (eg 80%)</li>
<li>elbow criteria : keep components before there is a “drop” in the eigenvalues barplot</li>
</ul>
</div>
<div id="other-inertia-based-methods" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Other inertia-based methods</h3>
<p>PCA is designed only for continuous variables, but you can use other methods for other types of data :</p>
<ul>
<li>MCA (Multiple Correspondence Analysis ) for categorical variables (if you have a mixture of continuous and categorical, you can discretize numerical variables and perform MCA)</li>
<li>FDA (Functional Data Analysis for functions/curves)</li>
</ul>
</div>
<div id="t-sne" class="section level3">
<h3><span class="header-section-number">6.3.3</span> t-SNE</h3>
<p>t-SNE ahs a completely different approach to dimension reduction : it does not aim to preserve the total variance but rather the distances between the observations.</p>
</div>
<div id="a-word-about-clustering" class="section level3">
<h3><span class="header-section-number">6.3.4</span> A word about clustering</h3>
</div>
</div>
<div id="visualization-bonus-dashboards-and-reports" class="section level2">
<h2><span class="header-section-number">6.4</span> Visualization bonus : dashboards and reports</h2>
<div id="shiny-and-rmarkdown" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Shiny and rmarkdown</h3>
<p>R offers 2 main packages that allow you to create dashboards and reports in HTML format and the latest feature of web technologies without knowing anything about HTML, CSS or other web-specific languages :</p>
<ul>
<li><a href="https://rmarkdown.rstudio.com/">Rmarkdown</a> is markdown adapted to R, allows you to create <em>standalone</em> documents in either PDF or HTML format, and mixes regular word-processor features and R code. The <a href="https://rmarkdown.rstudio.com/flexdashboard/">flexdashboard package</a> is an extension to Rmarkdown that helps to generate dashboards in HTML format. Those tools are essentially used to design reproducible documents (scientific reports, regularly updated reports/dashboards…). You can also create presentation with it.</li>
<li><a href="https://shiny.rstudio.com/gallery/">Shiny</a> is a package to develop interactive web-apps. A shiny app requires an R engine to be rendered on the client side.</li>
</ul>
<p>In the course material, you’ll find one example for each package. You’ll easily find online material to develop your skills further with these tools</p>
<ul>
<li>For <a href="https://bookdown.org/yihui/rmarkdown/">rmarkdown</a></li>
<li>For <a href="https://mastering-shiny.org/">shiny</a></li>
</ul>
</div>
<div id="web-based-graphics-with-plotly" class="section level3">
<h3><span class="header-section-number">6.4.2</span> Web-based graphics with <code>plotly</code></h3>
<p><a href="https://plotly.com/r/">plotly</a> is a graphical library that generate “interactive” web-based graphics. It is available for R, but also python and other programming languages. You can learn the syntax of this package too, but there is a very useful function, <code>plotly::ggplotly()</code> that translates your ggplot object into a <code>plotly</code> graphic. It works for most of the cases.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="multivariate-analysis-and-dimension-reduction.html#cb245-1"></a><span class="co"># install.packages(&quot;plotly&quot;)</span></span>
<span id="cb245-2"><a href="multivariate-analysis-and-dimension-reduction.html#cb245-2"></a><span class="kw">require</span>(plotly)</span>
<span id="cb245-3"><a href="multivariate-analysis-and-dimension-reduction.html#cb245-3"></a><span class="kw">ggplotly</span>(gg1)</span></code></pre></div>
<div id="htmlwidget-3fd8435e22e8bcaffc62" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3fd8435e22e8bcaffc62">{"x":{"data":[{"orientation":"v","width":[814154.0251699,814154.0251699,814154.0251699,814154.025169901,814154.0251699,814154.0251699,814154.025169902,814154.0251699,814154.0251699,814154.025169902,814154.025169898,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169902,814154.025169898,814154.025169902,814154.025169902,814154.025169894,814154.025169902,814154.025169894,814154.025169902,814154.025169902,814154.025169894,814154.025169902],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0,814154.0251699,1628308.0503398,2442462.0755097,3256616.1006796,4070770.1258495,4884924.1510194,5699078.1761893,6513232.2013592,7327386.2265291,8141540.251699,8955694.2768689,9769848.3020388,10584002.3272087,11398156.3523786,12212310.3775485,13026464.4027184,13840618.4278883,14654772.4530582,15468926.4782281,16283080.503398,17097234.5285679,17911388.5537378,18725542.5789077,19539696.6040776,20353850.6292475,21168004.6544174,21982158.6795873,22796312.7047572,23610466.7299271],"y":[1661,1109,1300,213,67,73,74,78,74,137,76,100,42,34,18,17,10,8,3,3,2,2,2,7,0,2,0,2,1,3],"text":["count: 1661<br />distance:        0","count: 1109<br />distance:   814154","count: 1300<br />distance:  1628308","count:  213<br />distance:  2442462","count:   67<br />distance:  3256616","count:   73<br />distance:  4070770","count:   74<br />distance:  4884924","count:   78<br />distance:  5699078","count:   74<br />distance:  6513232","count:  137<br />distance:  7327386","count:   76<br />distance:  8141540","count:  100<br />distance:  8955694","count:   42<br />distance:  9769848","count:   34<br />distance: 10584002","count:   18<br />distance: 11398156","count:   17<br />distance: 12212310","count:   10<br />distance: 13026464","count:    8<br />distance: 13840618","count:    3<br />distance: 14654772","count:    3<br />distance: 15468926","count:    2<br />distance: 16283081","count:    2<br />distance: 17097235","count:    2<br />distance: 17911389","count:    7<br />distance: 18725543","count:    0<br />distance: 19539697","count:    2<br />distance: 20353851","count:    0<br />distance: 21168005","count:    2<br />distance: 21982159","count:    1<br />distance: 22796313","count:    3<br />distance: 23610467"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(89,89,89,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Age distribution","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1628308.0503398,25238774.7802669],"tickmode":"array","ticktext":["0.0e+00","5.0e+06","1.0e+07","1.5e+07","2.0e+07","2.5e+07"],"tickvals":[0,5000000,10000000,15000000,20000000,25000000],"categoryorder":"array","categoryarray":["0.0e+00","5.0e+06","1.0e+07","1.5e+07","2.0e+07","2.5e+07"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"distance","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-83.05,1744.05],"tickmode":"array","ticktext":["0","500","1000","1500"],"tickvals":[0,500,1000,1500],"categoryorder":"array","categoryarray":["0","500","1000","1500"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"24dc1edc5842":{"x":{},"type":"bar"}},"cur_data":"24dc1edc5842","visdat":{"24dc1edc5842":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>This is very useful to embed in a rmarkdown document or a shiny app !</p>
</div>
<div id="other-packages-widgets" class="section level3">
<h3><span class="header-section-number">6.4.3</span> Other packages &amp; widgets</h3>
<p>You can use a lot of other <a href="https://www.htmlwidgets.org/index.html">html widgets</a> to incorporate in your report/shiny app</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="stats.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reg.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DataExploration.pdf", "DataExploration.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
